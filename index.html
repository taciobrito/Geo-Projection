<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>Teste D3</title>

   <style type="text/css">
   .estados {
       fill: #0f0;
       fill-opacity: 0.8;
       stroke: #f00;
       stroke-linejoin: round;
   }

   .estados.AM, .estados.AC{
       fill: #f00;
   }

   .contorno_estados{
       fill: none;
       stroke: #f00;
       stroke-linejoin: round;
   }

   .municipios{

   }
   
   </style>

</head>
<body>
  	<script src="https://d3js.org/d3.v4.min.js"></script>
  	<script src="https://d3js.org/d3-queue.v2.min.js"></script>
  	<script src="https://d3js.org/topojson.v2.min.js"></script>

    <script>
        // Defini altura e largura
        var width = 800, height = 400; 
       	var svg = d3.select("body").append("svg")
           .attr("width", width).attr("height", height);
        var g = svg.append("g");

        var projection = d3.geoMercator().scale(300)
               .rotate([50,0,0])
               .center([-55,-15])
               .translate([width/2, height/2])
               .clipAngle(90);
        var path = d3.geoPath().projection(projection);

        var zoom = d3.zoom()
           .scaleExtent([1, 40])
           .translateExtent([[-100, -100], [width + 90, height + 100]])
           .on("zoom", zoomed);

        g.call(zoom);

        // Carrega o arquivo JSON
        d3.json("d3/brasil.json", function(error, shp){
            if (error) return console.error(error);
            // Projeta o mapa
 
            //console.log(shp.objects);
            var subunits = topojson.feature(shp, shp.objects.brasil);

            g.selectAll(".estados")
                .data(subunits.features).enter().append("path")
                .attr("class", function(d){ 
                    return "estados " + d.properties.sigla; })
                .attr("d", path);

            g.append("path")
               .datum(subunits).attr("d", path)
               .attr("class", "contorno_estados");

            g.append("path")
		    .datum(topojson.feature(uk, uk.objects.places))
		    .attr("d", path)
		    .attr("class", "place");

       }); // Fim d3.json (estados brasileiros)

       function zoomed(){
           g.attr("transform", d3.event.transform);
       }

   </script>

</body>

</html>